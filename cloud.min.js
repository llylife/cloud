!function(e){"function"==typeof define&&define.amd?define(e()):window.cloud=e()}(function(){"use strict";function l(e,t,n,c){for(var o=[],l=0;l<t.length;l++){o.push('<div class="cloud-select" data-index="'+l+'">');var i=new RegExp("^("+c.replace(/,/,"|")+")$");i.test(t[l][n])?o.push('<div class="cloud-select-true"></div>'):o.push('<div class="cloud-select-false"></div>'),o.push('<div class="cloud-select-title">'+t[l][n]+"</div>"),o.push("</div>")}return o.join("")}var t=(window,document),n=0,c={},o=["success","warning","error","loading"];return c.open=function(e){function i(){return n++,u(),a(),r(),d(),v}function u(){for(var t in e)c[t]=e[t]}function a(){var e=[];if(l.className="cloud",l.id="cloud-"+n,l.style.zIndex=1e4+n,e.push('<div class="cloud-main">'),(""!=c.title||c.closeBtn)&&(e.push('<div class="cloud-title">'),e.push(c.title),c.closeBtn&&e.push('<div class="cloud-closebtn"></div>'),e.push("</div>")),""!=c.content&&e.push('<div class="cloud-content">'+s()+"</div>"),c.button.length>0){var t=c.button;e.push('<div class="cloud-button">');for(var o=0;o<t.length;o++)e.push('<div class="cloud-button-item">'+t[o].name+"</div>");e.push("</div>")}e.push("</div>"),c.covered&&e.push('<div class="cloud-cover"></div>'),l.innerHTML=e.join("")}function s(){for(var e=0;e<o.length;e++)if(o[e]==c.icon)return'<div class="cloud-icon cloud-icon-'+o[e]+'">'+c.content+"</div>";return/^.*?(jpg|png|gif)$/.test(c.icon)?'<div class="cloud-icon" style="background-image: url('+c.icon+');">'+c.content+"</div>":c.content}function r(){var e=l.querySelector(".cloud-closebtn"),t=l.querySelectorAll(".cloud-button-item"),n=l.querySelector(".cloud-cover");if(e&&e.addEventListener("click",v,!1),t.length>0)for(var o=0;o<c.button.length;o++)!function(e,t){e.addEventListener("click",function(){"callback"in t?t.callback(l)!==!1&&v():v()},!1)}(t[o],c.button[o]);n&&c.coveredClose&&n.addEventListener("click",v,!1)}function d(){t.body.appendChild(l),c.load(l),l.style.margin="-"+l.offsetHeight/2+"px 0 0 -"+l.offsetWidth/2+"px"}function v(){c.close(l)!==!1&&(l.className+=" cloud-close",t.body.removeChild(l))}var c={title:"",closeBtn:!1,content:"",icon:"",covered:!1,coveredClose:!0,button:[],load:function(e){},close:function(e){}},l=document.createElement("div");return i()},c.msg=function(e,t,n){var c=!0,o=this.open({content:e,load:function(e){e.style.top=t||"50%";var n=e.querySelector(".cloud-main");n.style.background="rgba(0, 0, 0, 0.5)",n.style.border="none",n.style.width="auto";var c=e.querySelector(".cloud-content");c.style.color="#fff",c.style.padding="2px 10px",c.style.fontSize="12px"},close:function(e){return c&&(e.style.cssText+="-webkit-transition: all 0.5s;transition: all 0.5s;opacity: 0;",c=!0),!1}});setTimeout(o,n||1500)},c.text=function(e,t,n){this.open({title:e||"请输入内容",content:'<input class="cloud-text" type="text" value="'+(t||"")+'">',covered:!0,coveredClose:!1,closeBtn:!0,button:[{name:"取消"},{name:"确定",callback:function(e){var t=e.querySelector(".cloud-text");n(t.value)}}]})},c.textarea=function(e,t,n){this.open({title:e||"请输入内容",content:'<textarea class="cloud-text">'+t+"</textarea>",covered:!0,coveredClose:!1,closeBtn:!0,button:[{name:"取消"},{name:"确定",callback:function(e){var t=e.querySelector(".cloud-text");n(t.value)}}]})},c.alert=function(e){this.open({title:"系统提示",content:e,covered:!0,closeBtn:!0,button:[{name:"确定",callback:function(){}}]})},c.explain=function(e,t){this.open({content:e,covered:!0,icon:t||""})},c.asked=function(e,t,n){this.open({content:e,covered:!0,button:[{name:"取消",callback:n||function(){}},{name:"确定",callback:t||function(){}}]})},c.select=function(e,t,n,c,o){function u(e){for(var n=e.querySelectorAll(".cloud-select"),c=0;c<n.length;c++)n[c].addEventListener("click",function(){for(var e=this.parentNode.querySelectorAll(".cloud-select-true"),n=0;n<e.length;n++)e[n].className="cloud-select-false";this.querySelector("div").className="cloud-select-true";var c=parseInt(this.dataset.index);o(t[c]),i()},!1)}var i=this.open({title:e,content:l(e,t,n,c),covered:!0,button:[{name:"取消"}],load:u})},c.checkbox=function(e,t,n,c,o){function u(e){for(var t=e.querySelectorAll(".cloud-select"),n=0;n<t.length;n++)t[n].addEventListener("click",function(){var e=this.querySelector("div");"cloud-select-false"==e.className?e.className="cloud-select-true":e.className="cloud-select-false"},!1)}this.open({title:e,content:l(e,t,n,name),covered:!0,button:[{name:"确定",callback:function(e){for(var n=e.querySelectorAll(".cloud-select-true"),c=[],l=0;l<n.length;l++){var i=parseInt(n[l].parentNode.dataset.index);c.push(t[i])}o(c)}}],load:u})},c.loading=function(e,t,n){return this.open({content:e,covered:!0,coveredClose:void 0==t?!0:t,icon:n||"loading",load:function(e){e.querySelector(".cloud-main").style.width="auto"}})},c});