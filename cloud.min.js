!function(e){"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(e):"undefined"!=typeof module&&module.exports?module.exports=e():window.cloud=e()}(function(){"use strict";function l(e,t,n,o){for(var c=[],l=0;l<t.length;l++){c.push('<div class="cloud-select" data-index="'+l+'">');var i=new RegExp("^("+o.replace(/,/,"|")+")$");i.test(t[l][n])?c.push('<div class="cloud-select-true"></div>'):c.push('<div class="cloud-select-false"></div>'),c.push('<div class="cloud-select-title">'+t[l][n]+"</div>"),c.push("</div>")}return c.join("")}var t=(window,document),n=0,o={},c=["success","warning","error","loading"];return o.open=function(e){function i(){return n++,u(),r(),a(),d(),{close:f,el:l}}function u(){for(var t in e)o[t]=e[t]}function r(){var e=[];if(l.className="cloud",l.id="cloud-"+n,l.style.zIndex=1e4+n,e.push('<div class="cloud-main">'),(""!=o.title||o.closeBtn)&&(e.push('<div class="cloud-title">'),e.push(o.title),o.closeBtn&&e.push('<div class="cloud-closebtn"></div>'),e.push("</div>")),""!=o.content&&e.push('<div class="cloud-content">'+s()+"</div>"),o.button.length>0){var t=o.button;e.push('<div class="cloud-button">');for(var c=0;c<t.length;c++)e.push('<div class="cloud-button-item">'+t[c].name+"</div>");e.push("</div>")}e.push("</div>"),o.covered&&e.push('<div class="cloud-cover"></div>'),l.innerHTML=e.join("")}function s(){for(var e=0;e<c.length;e++)if(c[e]==o.icon)return'<div class="cloud-icon cloud-icon-'+c[e]+'">'+o.content+"</div>";return/^.*?(jpg|png|gif)$/.test(o.icon)?'<div class="cloud-icon" style="background-image: url('+o.icon+');">'+o.content+"</div>":o.content}function a(){var e=l.querySelector(".cloud-closebtn"),t=l.querySelectorAll(".cloud-button-item"),n=l.querySelector(".cloud-cover");if(e&&e.addEventListener("click",f,!1),t.length>0)for(var c=0;c<o.button.length;c++)!function(e,t){e.addEventListener("click",function(){"callback"in t?t.callback(l)!==!1&&f():f()},!1)}(t[c],o.button[c]);n&&o.coveredClose&&n.addEventListener("click",f,!1)}function d(){t.body.appendChild(l),o.load(l),l.style.margin="-"+l.offsetHeight/2+"px 0 0 -"+l.offsetWidth/2+"px"}function f(){o.close(l)!==!1&&(l.className+=" cloud-close",t.body.removeChild(l))}var o={title:"",closeBtn:!1,content:"",icon:"",covered:!1,coveredClose:!0,button:[],load:function(e){},close:function(e){}},l=document.createElement("div");return i()},o.msg=function(e,t,n){var o=!0,c=this.open({content:e,load:function(e){e.style.top=t||"50%";var n=e.querySelector(".cloud-main");n.style.background="rgba(0, 0, 0, 0.5)",n.style.border="none",n.style.width="auto";var o=e.querySelector(".cloud-content");o.style.color="#fff",o.style.padding="2px 10px",o.style.fontSize="12px"},close:function(e){return o?(e.style.cssText+="-webkit-transition: all 0.5s;transition: all 0.5s;opacity: 0;",o=!1,setTimeout(c.close,500),!1):!0}});return setTimeout(c.close,n||1500),c},o.text=function(e,t,n){return this.open({title:e||"请输入内容",content:'<input class="cloud-text" type="text" value="'+(t||"")+'">',covered:!0,coveredClose:!1,closeBtn:!0,button:[{name:"取消"},{name:"确定",callback:function(e){var t=e.querySelector(".cloud-text");n(t.value)}}]})},o.textarea=function(e,t,n){return this.open({title:e||"请输入内容",content:'<textarea class="cloud-text">'+t+"</textarea>",covered:!0,coveredClose:!1,closeBtn:!0,button:[{name:"取消"},{name:"确定",callback:function(e){var t=e.querySelector(".cloud-text");n(t.value)}}]})},o.alert=function(e){return this.open({title:"系统提示",content:e,covered:!0,closeBtn:!0,button:[{name:"确定",callback:function(){}}]})},o.explain=function(e,t){return this.open({content:e,covered:!0,icon:t||""})},o.asked=function(e,t,n){return this.open({content:e,covered:!0,button:[{name:"取消",callback:n||function(){}},{name:"确定",callback:t||function(){}}]})},o.select=function(e,t,n,o,c){function u(e){for(var n=e.querySelectorAll(".cloud-select"),o=0;o<n.length;o++)n[o].addEventListener("click",function(){for(var e=this.parentNode.querySelectorAll(".cloud-select-true"),n=0;n<e.length;n++)e[n].className="cloud-select-false";this.querySelector("div").className="cloud-select-true";var o=parseInt(this.dataset.index);c(t[o]),i.close()},!1)}var i=this.open({title:e,content:l(e,t,n,o),covered:!0,button:[{name:"取消"}],load:u});return i},o.checkbox=function(e,t,n,o,c){function u(e){for(var t=e.querySelectorAll(".cloud-select"),n=0;n<t.length;n++)t[n].addEventListener("click",function(){var e=this.querySelector("div");"cloud-select-false"==e.className?e.className="cloud-select-true":e.className="cloud-select-false"},!1)}var i=this.open({title:e,content:l(e,t,n,name),covered:!0,button:[{name:"确定",callback:function(e){for(var n=e.querySelectorAll(".cloud-select-true"),o=[],l=0;l<n.length;l++){var i=parseInt(n[l].parentNode.dataset.index);o.push(t[i])}c(o)}}],load:u});return i},o.loading=function(e,t,n){return this.open({content:e,covered:!0,coveredClose:void 0==t?!0:t,icon:n||"loading",load:function(e){e.querySelector(".cloud-main").style.width="auto"}})},o});